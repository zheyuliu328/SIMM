<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SIMMæ ‡å‡†åˆå§‹ä¿è¯é‡‘æ¨¡å‹æ•™å­¦æ¼”ç¤º - äº¤äº’å¼å¯è§†åŒ–">
    <title>SIMM æ ‡å‡†åˆå§‹ä¿è¯é‡‘æ¨¡å‹ - äº¤äº’å¼æ•™å­¦æ¼”ç¤º v3.0</title>
    <style>
        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #764ba2;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1a1a2e;
            --gray: #6c757d;
            --light: #f8f9fa;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }
        
        header h1 { 
            font-size: 2.2em; 
            margin-bottom: 10px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        header p { opacity: 0.9; font-size: 1.1em; }
        
        .version-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(102, 126, 234, 0.3);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
        }
        
        .content { padding: 40px; }
        .section { margin-bottom: 40px; }
        
        .section h2 {
            color: #1a1a2e;
            border-left: 4px solid #667eea;
            padding-left: 15px;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #e9ecef;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .card.active {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.3);
        }
        
        .card h3 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .highlight {
            background: linear-gradient(90deg, #667eea20 0%, #764ba220 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .formula {
            background: #1a1a2e;
            color: #00ff88;
            padding: 16px 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
        }
        
        .formula .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255,255,255,0.1);
            border: none;
            color: #00ff88;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.95em;
        }
        
        th, td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }
        
        tr:hover { background: #f8f9fa; }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
        }
        
        .badge-ir { background: #e3f2fd; color: #1565c0; }
        .badge-fx { background: #f3e5f5; color: #7b1fa2; }
        .badge-eq { background: #e8f5e9; color: #2e7d32; }
        .badge-cr { background: #fff3e0; color: #ef6c00; }
        .badge-co { background: #fce4ec; color: #c2185b; }
        
        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 24px;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .step.active {
            opacity: 1;
        }
        
        .step-num {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            margin-right: 16px;
        }
        
        .step-content { flex: 1; }
        .step-content h4 { margin-bottom: 8px; color: #1a1a2e; }
        
        .interactive-demo {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 12px;
            padding: 24px;
            color: white;
            margin-top: 20px;
        }
        
        .interactive-demo h3 {
            color: #00ff88;
            margin-bottom: 16px;
        }
        
        .input-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        
        .input-group {
            flex: 1;
            min-width: 150px;
        }
        
        .input-group label {
            display: block;
            font-size: 0.85em;
            margin-bottom: 4px;
            color: #94a3b8;
        }
        
        .input-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #334155;
            border-radius: 6px;
            background: #0f172a;
            color: white;
            font-family: monospace;
            transition: border-color 0.2s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .input-group input.error {
            border-color: #ef4444;
        }
        
        .error-message {
            color: #ef4444;
            font-size: 0.75em;
            margin-top: 4px;
            display: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .result-box {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
            font-family: monospace;
            font-size: 0.9em;
        }
        
        .result-value {
            color: #00ff88;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .result-value.error {
            color: #ef4444;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #334155;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .flowchart {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 24px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            overflow-x: auto;
        }
        
        .flow-node {
            text-align: center;
            padding: 12px 16px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            min-width: 100px;
            font-size: 0.9em;
        }
        
        .flow-arrow {
            color: #667eea;
            font-size: 1.5em;
            margin: 0 8px;
        }
        
        .tab-container {
            margin-top: 20px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            color: #6c757d;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }
        
        .tab-btn:hover {
            color: #667eea;
        }
        
        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        footer {
            background: #f8f9fa;
            padding: 20px 40px;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            header { padding: 24px; }
            header h1 { font-size: 1.6em; }
            .content { padding: 24px; }
            .card-grid { grid-template-columns: 1fr; }
            .flowchart { flex-direction: column; gap: 12px; }
            .flow-arrow { transform: rotate(90deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="version-badge">v3.0 (Round 9)</span>
            <h1>ğŸ›¡ï¸ SIMM æ ‡å‡†åˆå§‹ä¿è¯é‡‘æ¨¡å‹</h1>
            <p>Standard Initial Margin Model - éæ¸…ç®—è¡ç”Ÿå“ä¿è¯é‡‘è®¡ç®—æ¡†æ¶</p>
        </header>
        
        <div class="content">
            <!-- WHY Section -->
            <div class="section">
                <h2>ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ SIMM? (Why)</h2>
                <div class="highlight">
                    <p><strong>ç›‘ç®¡èƒŒæ™¯ï¼š</strong>2016å¹´BCBS/IOSCOä¿è¯é‡‘è¦æ±‚è§„å®šï¼Œéæ¸…ç®—è¡ç”Ÿå“äº¤æ˜“å¿…é¡»äº¤æ¢åˆå§‹ä¿è¯é‡‘ï¼Œä»¥é™ä½ç³»ç»Ÿæ€§é£é™©ã€‚</p>
                </div>
                <div class="card-grid">
                    <div class="card" onclick="toggleCard(this)">
                        <h3>âš ï¸ é£é™©é˜²èŒƒ</h3>
                        <p>é˜²æ­¢äº¤æ˜“å¯¹æ‰‹è¿çº¦å¼•å‘çš„è¿é”ååº”ï¼Œä¿æŠ¤é‡‘èå¸‚åœºç¨³å®šã€‚</p>
                    </div>
                    <div class="card" onclick="toggleCard(this)">
                        <h3>ğŸ“ æ ‡å‡†åŒ–è®¡ç®—</h3>
                        <p>æä¾›ç»Ÿä¸€ã€é€æ˜ã€å¯å®¡è®¡çš„ä¿è¯é‡‘è®¡ç®—æ–¹æ³•ã€‚</p>
                    </div>
                    <div class="card" onclick="toggleCard(this)">
                        <h3>ğŸ’° èµ„æœ¬æ•ˆç‡</h3>
                        <p>ç›¸è¾ƒäºç®€å•åä¹‰æœ¬é‡‘æ³•ï¼ŒSIMMæ›´ç²¾ç¡®åæ˜ çœŸå®é£é™©æ•å£ã€‚</p>
                    </div>
                </div>
            </div>

            <!-- WHICH Section -->
            <div class="section">
                <h2>ğŸ“‹ SIMM åŒ…å«å“ªäº›é£é™©? (Which)</h2>
                <p>SIMMæ¡†æ¶å°†é£é™©åˆ’åˆ†ä¸ºå…­å¤§ç±»åˆ«ï¼Œé‡‡ç”¨<b>æ•æ„Ÿåº¦æ³•</b>è®¡ç®—ï¼š</p>
                
                <table>
                    <thead>
                        <tr>
                            <th>é£é™©ç±»åˆ«</th>
                            <th>è¦†ç›–äº§å“</th>
                            <th>ä¸»è¦æ•æ„Ÿåº¦</th>
                            <th>å…¸å‹é£é™©æƒé‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge badge-ir">åˆ©ç‡ (IR)</span></td>
                            <td>åˆ©ç‡äº’æ¢ã€å›½å€ºæœŸè´§</td>
                            <td>DV01, CS01</td>
                            <td>0.5% - 3%</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-fx">å¤–æ±‡ (FX)</span></td>
                            <td>å¤–æ±‡è¿œæœŸã€è´§å¸äº’æ¢</td>
                            <td>Delta, Vega</td>
                            <td>8% - 15%</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-eq">è‚¡ç¥¨ (EQ)</span></td>
                            <td>è‚¡ç¥¨äº’æ¢ã€æœŸæƒ</td>
                            <td>Delta, Vega, Curvature</td>
                            <td>15% - 40%</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-cr">ä¿¡ç”¨-æ ‡å‡† (CRQ)</span></td>
                            <td>æŠ•èµ„çº§CDSã€CDX.IG</td>
                            <td>CS01, JTD</td>
                            <td>10% (IG: BBB-åŠä»¥ä¸Š)</td>
                        </tr>
                        <tr style="background: #fff8e1;">
                            <td><span class="badge badge-cr" style="background: #ff9800; color: white;">ä¿¡ç”¨-éæ ‡å‡† (CRNQ)</span></td>
                            <td>é«˜æ”¶ç›ŠCDSã€æ— è¯„çº§å•å</td>
                            <td>CS01, JTD</td>
                            <td>30% (HY: BB+åŠä»¥ä¸‹) âš ï¸ 3x RW</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-co">å•†å“ (CO)</span></td>
                            <td>å•†å“æœŸè´§ã€æ‰æœŸ</td>
                            <td>Delta, Vega</td>
                            <td>10% - 40%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- HOW Section -->
            <div class="section">
                <h2>âš™ï¸ å¦‚ä½•è®¡ç®—? (How)</h2>
                
                <!-- æµç¨‹å›¾ -->
                <div class="flowchart">
                    <div class="flow-node">
                        <strong>äº¤æ˜“æ•°æ®</strong><br>
                        <small>Trade Data</small>
                    </div>
                    <span class="flow-arrow">â†’</span>
                    <div class="flow-node">
                        <strong>æ•æ„Ÿåº¦</strong><br>
                        <small>Sensitivity</small>
                    </div>
                    <span class="flow-arrow">â†’</span>
                    <div class="flow-node">
                        <strong>é£é™©æƒé‡</strong><br>
                        <small>Risk Weight</small>
                    </div>
                    <span class="flow-arrow">â†’</span>
                    <div class="flow-node">
                        <strong>æ–¹å·®èšåˆ</strong><br>
                        <small>Variance</small>
                    </div>
                    <span class="flow-arrow">â†’</span>
                    <div class="flow-node">
                        <strong>RCA</strong><br>
                        <small>æ€»é£é™©è´¹ç”¨</small>
                    </div>
                </div>
            </div>

            <!-- Interactive Demo -->
            <div class="section">
                <h2>ğŸ§® äº¤äº’å¼è®¡ç®—æ¼”ç¤º</h2>
                <div class="interactive-demo">
                    <h3>âš¡ ç®€åŒ–SIMMè®¡ç®—å™¨</h3>
                    <p style="color: #94a3b8; margin-bottom: 16px;">è¾“å…¥å„é£é™©ç±»åˆ«çš„æ•æ„Ÿåº¦ï¼Œå®æ—¶è®¡ç®—RCA</p>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>åˆ©ç‡æ•æ„Ÿåº¦ (IR)</label>
                            <input type="text" inputmode="decimal" id="irSens" value="100000" oninput="calculateDemo()">
                            <div id="irSensError" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—</div>
                        </div>
                        <div class="input-group">
                            <label>å¤–æ±‡æ•æ„Ÿåº¦ (FX)</label>
                            <input type="text" inputmode="decimal" id="fxSens" value="50000" oninput="calculateDemo()">
                            <div id="fxSensError" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—</div>
                        </div>
                        <div class="input-group">
                            <label>è‚¡ç¥¨æ•æ„Ÿåº¦ (EQ)</label>
                            <input type="text" inputmode="decimal" id="eqSens" value="30000" oninput="calculateDemo()">
                            <div id="eqSensError" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—</div>
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>ä¿¡ç”¨-æ ‡å‡† (CRQ, RW=10%)</label>
                            <input type="text" inputmode="decimal" id="crqSens" value="20000" oninput="calculateDemo()">
                            <div id="crqSensError" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—</div>
                        </div>
                        <div class="input-group">
                            <label style="color: #ff9800;">ä¿¡ç”¨-éæ ‡å‡† (CRNQ, RW=30%) âš ï¸</label>
                            <input type="text" inputmode="decimal" id="crnqSens" value="10000" oninput="calculateDemo()" style="border-color: #ff9800;">
                            <div id="crnqSensError" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—</div>
                        </div>
                        <div class="input-group">
                            <label>å•†å“æ•æ„Ÿåº¦ (CO)</label>
                            <input type="text" inputmode="decimal" id="coSens" value="15000" oninput="calculateDemo()">
                            <div id="coSensError" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—</div>
                        </div>
                    </div>
                    
                    <div class="result-box">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 20px;">
                            <div>
                                <div style="color: #94a3b8; font-size: 0.85em;">è®¡ç®—RCA</div>
                                <div class="result-value" id="rcaResult">6,246.00</div>
                            </div>
                            <div>
                                <div style="color: #94a3b8; font-size: 0.85em;">é£é™©è´¡çŒ®åˆ†è§£</div>
                                <div id="breakdown" style="margin-top: 8px; font-size: 0.85em;">
                                    IR: 37% | FX: 39% | EQ: 24%
                                </div>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="riskBar" style="width: 65%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Real Demo Results -->
            <div class="section">
                <h2>ğŸ“Š çœŸå®è¿è¡Œç»“æœ</h2>
                <div class="highlight">
                    <p><strong>åŸºäº sample_data.csv çš„å®é™…è®¡ç®—è¾“å‡ºï¼š</strong></p>
                </div>
                <div id="realResults" style="margin-top: 20px;">
                    <div class="result-card" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 12px; padding: 24px; color: white;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 16px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div style="color: #94a3b8; font-size: 0.85em; margin-bottom: 8px;">äº¤æ˜“æ€»æ•°</div>
                                <div id="realTradeCount" style="font-size: 2em; font-weight: bold; color: #00ff88;">26</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div style="color: #94a3b8; font-size: 0.85em; margin-bottom: 8px;">æ€»åä¹‰æœ¬é‡‘</div>
                                <div id="realNotional" style="font-size: 1.5em; font-weight: bold; color: #00ff88;">237,800,000</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div style="color: #94a3b8; font-size: 0.85em; margin-bottom: 8px;">åˆå§‹ä¿è¯é‡‘ (RCA)</div>
                                <div id="realRCA" style="font-size: 2em; font-weight: bold; color: #00ff88;">249,599.63</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div style="color: #94a3b8; font-size: 0.85em; margin-bottom: 8px;">ä¿è¯é‡‘æ¯”ç‡</div>
                                <div id="realMarginRatio" style="font-size: 2em; font-weight: bold; color: #00ff88;">0.1050%</div>
                            </div>
                        </div>
                        
                        <h4 style="color: #00ff88; margin: 20px 0 12px 0;">é£é™©ç±»åˆ«åˆ†è§£</h4>
                        <table style="width: 100%; color: white; font-size: 0.9em;">
                            <thead>
                                <tr style="background: rgba(255,255,255,0.1);">
                                    <th style="padding: 12px; text-align: left;">é£é™©ç±»åˆ«</th>
                                    <th style="padding: 12px; text-align: right;">é£é™©æƒé‡</th>
                                    <th style="padding: 12px; text-align: right;">æ•æ„Ÿåº¦</th>
                                    <th style="padding: 12px; text-align: right;">æ–¹å·®è´¡çŒ®</th>
                                    <th style="padding: 12px; text-align: right;">å æ¯”</th>
                                </tr>
                            </thead>
                            <tbody id="riskBreakdownTable">
                                <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                    <td style="padding: 12px;"><span class="badge badge-eq">è‚¡ç¥¨ (EQ)</span></td>
                                    <td style="padding: 12px; text-align: right;">20.0%</td>
                                    <td style="padding: 12px; text-align: right;">1,065,000.00</td>
                                    <td style="padding: 12px; text-align: right;">45,369,000,000</td>
                                    <td style="padding: 12px; text-align: right; color: #00ff88;">94.89%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                    <td style="padding: 12px;"><span class="badge badge-cr" style="background: #ff9800; color: white;">ä¿¡ç”¨-éæ ‡å‡† (CRNQ)</span></td>
                                    <td style="padding: 12px; text-align: right;">30.0%</td>
                                    <td style="padding: 12px; text-align: right;">135,000.00</td>
                                    <td style="padding: 12px; text-align: right;">1,640,250,000</td>
                                    <td style="padding: 12px; text-align: right; color: #00ff88;">3.43%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                    <td style="padding: 12px;"><span class="badge badge-cr">ä¿¡ç”¨-æ ‡å‡† (CRQ)</span></td>
                                    <td style="padding: 12px; text-align: right;">10.0%</td>
                                    <td style="padding: 12px; text-align: right;">230,000.00</td>
                                    <td style="padding: 12px; text-align: right;">529,000,000</td>
                                    <td style="padding: 12px; text-align: right; color: #00ff88;">1.11%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                    <td style="padding: 12px;"><span class="badge badge-co">å•†å“ (CO)</span></td>
                                    <td style="padding: 12px; text-align: right;">18.0%</td>
                                    <td style="padding: 12px; text-align: right;">84,000.00</td>
                                    <td style="padding: 12px; text-align: right;">228,614,400</td>
                                    <td style="padding: 12px; text-align: right; color: #00ff88;">0.48%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                    <td style="padding: 12px;"><span class="badge badge-ir">åˆ©ç‡ (IR)</span></td>
                                    <td style="padding: 12px; text-align: right;">1.5%</td>
                                    <td style="padding: 12px; text-align: right;">-385,000.00</td>
                                    <td style="padding: 12px; text-align: right;">33,350,625</td>
                                    <td style="padding: 12px; text-align: right; color: #00ff88;">0.07%</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                    <td style="padding: 12px;"><span class="badge badge-fx">å¤–æ±‡ (FX)</span></td>
                                    <td style="padding: 12px; text-align: right;">8.0%</td>
                                    <td style="padding: 12px; text-align: right;">41,000.01</td>
                                    <td style="padding: 12px; text-align: right;">10,758,405</td>
                                    <td style="padding: 12px; text-align: right; color: #00ff88;">0.02%</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div style="margin-top: 16px; padding: 12px; background: rgba(0,255,136,0.1); border-radius: 8px; font-size: 0.85em;">
                            <strong style="color: #00ff88;">è®¡ç®—è¯´æ˜ï¼š</strong>
                            <span style="color: #94a3b8;">RCA = âˆš(Î£ Ïáµ¢â±¼ Ã— Ïƒáµ¢ Ã— Ïƒâ±¼) = 249,599.63 | ä¿¡ç”¨é£é™©è´¡çŒ®å æ¯”: 4.54% | å‚æ•°ç‰ˆæœ¬: ISDA SIMM 2.5.0-community</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Real Code Run Demo -->
            <div class="section">
                <h2>ğŸ–¥ï¸ çœŸå®ä»£ç è¿è¡Œ Demo</h2>
                <div class="highlight" style="background: linear-gradient(90deg, #e8f5e9 0%, #c8e6c9 100%); border-left-color: #22c55e;">
                    <p><strong>âœ… æ•°æ®æ¥è‡ªçœŸå®è¿è¡Œè€Œéæ‰‹å¡«</strong> â€” ä»¥ä¸‹ç»“æœæ˜¯æ‰§è¡Œ <code>demo.py</code> çš„çœŸå®è¾“å‡º</p>
                </div>
                
                <div class="card-grid" style="margin-top: 20px;">
                    <div class="card" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: white;">
                        <h3 style="color: #00ff88;">ğŸ’° åˆå§‹ä¿è¯é‡‘ (RCA)</h3>
                        <div style="font-size: 2em; font-weight: bold; color: #00ff88; margin: 10px 0;">$249,599.63</div>
                        <div style="font-size: 0.85em; opacity: 0.8;">åŸºäº 26 ç¬”äº¤æ˜“è®¡ç®—</div>
                    </div>
                    <div class="card">
                        <h3>ğŸ“Š äº¤æ˜“ç»Ÿè®¡</h3>
                        <table style="margin: 0; font-size: 0.9em;">
                            <tr><td>äº¤æ˜“æ€»æ•°</td><td><strong>26</strong></td></tr>
                            <tr><td>æ€»åä¹‰æœ¬é‡‘</td><td><strong>$237.8M</strong></td></tr>
                            <tr><td>ä¿è¯é‡‘æ¯”ç‡</td><td><strong>0.105%</strong></td></tr>
                        </table>
                    </div>
                    <div class="card">
                        <h3>â±ï¸ è¿è¡Œä¿¡æ¯</h3>
                        <table style="margin: 0; font-size: 0.9em;">
                            <tr><td>è¿è¡Œæ—¶é—´</td><td><strong>2026-02-25</strong></td></tr>
                            <tr><td>æ•°æ®æº</td><td><strong>sample_data.csv</strong></td></tr>
                            <tr><td>ç‰ˆæœ¬</td><td><strong>v3.0 (R9)</strong></td></tr>
                        </table>
                    </div>
                </div>
                
                <div style="margin-top: 20px; background: #f8f9fa; border-radius: 8px; padding: 16px;">
                    <h4 style="margin-bottom: 12px; color: #1a1a2e;">ğŸ“‹ é£é™©ç±»åˆ«æ•æ„Ÿåº¦æ±‡æ€»ï¼ˆçœŸå®æ•°æ®ï¼‰</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>é£é™©ç±»åˆ«</th>
                                <th>é£é™©æƒé‡</th>
                                <th>æ•æ„Ÿåº¦</th>
                                <th>æ–¹å·®è´¡çŒ®</th>
                                <th>å æ¯”</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge badge-eq">è‚¡ç¥¨ (EQ)</span></td>
                                <td>20.00%</td>
                                <td>1,065,000.00</td>
                                <td>45,369,000,000</td>
                                <td><strong>72.8%</strong></td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-cr" style="background: #ff9800; color: white;">ä¿¡ç”¨-éæ ‡å‡† (CRNQ)</span></td>
                                <td>30.00%</td>
                                <td>135,000.00</td>
                                <td>1,640,250,000</td>
                                <td>2.6%</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-cr">ä¿¡ç”¨-æ ‡å‡† (CRQ)</span></td>
                                <td>10.00%</td>
                                <td>230,000.00</td>
                                <td>529,000,000</td>
                                <td>0.8%</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-co">å•†å“ (CO)</span></td>
                                <td>18.00%</td>
                                <td>84,000.00</td>
                                <td>228,614,400</td>
                                <td>0.4%</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-ir">åˆ©ç‡ (IR)</span></td>
                                <td>1.50%</td>
                                <td>-385,000.00</td>
                                <td>33,350,625</td>
                                <td>0.05%</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-fx">å¤–æ±‡ (FX)</span></td>
                                <td>8.00%</td>
                                <td>41,000.01</td>
                                <td>10,758,405</td>
                                <td>0.02%</td>
                            </tr>
                        </tbody>
                    </table>
                    <p style="margin-top: 12px; font-size: 0.85em; color: #6c757d;">
                        ğŸ’¡ å®Œæ•´è¿è¡Œæ—¥å¿—å’ŒJSONæ•°æ®è§ <code>reports/</code> ç›®å½•ï¼š
                        <a href="reports/real_run_demo.json" target="_blank">real_run_demo.json</a> | 
                        <a href="reports/real_run_demo.md" target="_blank">real_run_demo.md</a>
                    </p>
                </div>
            </div>

            <!-- Try It -->
            <div class="section">
                <h2>ğŸš€ åŠ¨æ‰‹å®è·µ</h2>
                <div class="highlight">
                    <p><strong>è¿è¡ŒPythonæ¼”ç¤ºï¼š</strong></p>
                    <div class="formula" style="margin-top: 10px;">$ python3 demo.py</div>
                    <p style="margin-top: 15px;">è¯¥æ¼”ç¤ºç¨‹åºå°†è¯»å– <code>sample_data.csv</code> ä¸­çš„ç¤ºä¾‹äº¤æ˜“æ•°æ®ï¼Œæ‰§è¡ŒSIMMç®€åŒ–è®¡ç®—æµç¨‹ï¼Œè¾“å‡ºå„é£é™©ç±»åˆ«çš„æ–¹å·®å’Œæœ€ç»ˆRCAã€‚</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>SIMM æ•™å­¦æ¼”ç¤º v3.0 (Round 9) | ç®€åŒ–ç‰ˆç”¨äºæ•™è‚²ç›®çš„</p>
            <p style="margin-top: 8px; font-size: 0.85em;">å®é™…SIMMè§„èŒƒè¯·å‚è€ƒ <a href="https://www.isda.org/book/ism/" target="_blank">ISDA å®˜æ–¹æ–‡æ¡£</a></p>
        </footer>
    </div>

    <script>
        // Round 9: è¾“å…¥éªŒè¯å·¥å…·å‡½æ•°
        function validateInput(inputId, fieldName) {
            const input = document.getElementById(inputId);
            const value = input.value.trim();
            const errorEl = document.getElementById(inputId + 'Error');
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºç©º
            if (value === '') {
                showError(input, errorEl, `${fieldName}ä¸èƒ½ä¸ºç©º`);
                return null;
            }
            
            // è§£æä¸ºæ•°å­—
            const num = parseFloat(value);
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—
            if (isNaN(num)) {
                showError(input, errorEl, `${fieldName}å¿…é¡»æ˜¯æœ‰æ•ˆæ•°å­—`);
                return null;
            }
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºæ— ç©·å¤§
            if (!isFinite(num)) {
                showError(input, errorEl, `${fieldName}ä¸èƒ½æ˜¯æ— ç©·å¤§`);
                return null;
            }
            
            // æ£€æŸ¥èŒƒå›´ï¼ˆæ•æ„Ÿåº¦ä¸èƒ½è¿‡å¤§ï¼Œé¿å…æº¢å‡ºï¼‰
            if (Math.abs(num) > 1e15) {
                showError(input, errorEl, `${fieldName}æ•°å€¼è¿‡å¤§`);
                return null;
            }
            
            // æ¸…é™¤é”™è¯¯çŠ¶æ€
            clearError(input, errorEl);
            return num;
        }
        
        function showError(input, errorEl, message) {
            input.style.borderColor = '#ef4444';
            input.classList.add('error');
            if (errorEl) {
                errorEl.textContent = message;
                errorEl.style.display = 'block';
            }
        }
        
        function clearError(input, errorEl) {
            input.style.borderColor = '#334155';
            input.classList.remove('error');
            if (errorEl) {
                errorEl.textContent = '';
                errorEl.style.display = 'none';
            }
        }
        
        function clearAllErrors() {
            const inputs = ['irSens', 'fxSens', 'eqSens', 'crqSens', 'crnqSens', 'coSens'];
            inputs.forEach(id => {
                const input = document.getElementById(id);
                const errorEl = document.getElementById(id + 'Error');
                clearError(input, errorEl);
            });
        }
        
        // Round 9: å¸¦éªŒè¯çš„è®¡ç®—å‡½æ•°
        function calculateDemo() {
            clearAllErrors();
            
            // éªŒè¯å¹¶è·å–æ‰€æœ‰è¾“å…¥
            const irSens = validateInput('irSens', 'åˆ©ç‡æ•æ„Ÿåº¦');
            const fxSens = validateInput('fxSens', 'å¤–æ±‡æ•æ„Ÿåº¦');
            const eqSens = validateInput('eqSens', 'è‚¡ç¥¨æ•æ„Ÿåº¦');
            const crqSens = validateInput('crqSens', 'ä¿¡ç”¨-æ ‡å‡†æ•æ„Ÿåº¦');
            const crnqSens = validateInput('crnqSens', 'ä¿¡ç”¨-éæ ‡å‡†æ•æ„Ÿåº¦');
            const coSens = validateInput('coSens', 'å•†å“æ•æ„Ÿåº¦');
            
            const resultEl = document.getElementById('rcaResult');
            const breakdownEl = document.getElementById('breakdown');
            const riskBarEl = document.getElementById('riskBar');
            
            // å¦‚æœæœ‰ä»»ä½•éªŒè¯å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯å¹¶åœæ­¢è®¡ç®—
            const values = [irSens, fxSens, eqSens, crqSens, crnqSens, coSens];
            if (values.some(v => v === null)) {
                resultEl.textContent = 'è¾“å…¥é”™è¯¯';
                resultEl.classList.add('error');
                breakdownEl.textContent = 'è¯·ä¿®æ­£çº¢è‰²æ ‡è®°çš„è¾“å…¥é¡¹';
                riskBarEl.style.width = '0%';
                return;
            }
            
            // æ¢å¤ç»“æœæ˜¾ç¤ºé¢œè‰²
            resultEl.classList.remove('error');
            
            const rw = {
                IR: 0.015,
                FX: 0.08,
                EQ: 0.20,
                CRQ: 0.10,
                CRNQ: 0.30,
                CO: 0.18
            };
            
            // ä½¿ç”¨ç»å¯¹å€¼
            const sens = {
                IR: Math.abs(irSens),
                FX: Math.abs(fxSens),
                EQ: Math.abs(eqSens),
                CRQ: Math.abs(crqSens),
                CRNQ: Math.abs(crnqSens),
                CO: Math.abs(coSens)
            };
            
            // è®¡ç®—æ–¹å·®
            const variance = {};
            for (let k in sens) {
                variance[k] = Math.pow(rw[k] * sens[k], 2);
            }
            
            // ç®€åŒ–RCAè®¡ç®—
            const totalVar = Object.values(variance).reduce((a, b) => a + b, 0);
            
            // Round 9: æ£€æŸ¥ç»“æœæœ‰æ•ˆæ€§
            if (!isFinite(totalVar) || totalVar < 0) {
                resultEl.textContent = 'è®¡ç®—é”™è¯¯';
                resultEl.classList.add('error');
                breakdownEl.textContent = 'è¾“å…¥æ•°å€¼å¯¼è‡´è®¡ç®—æº¢å‡º';
                return;
            }
            
            const rca = Math.sqrt(totalVar);
            
            // æ£€æŸ¥RCAæœ‰æ•ˆæ€§
            if (!isFinite(rca)) {
                resultEl.textContent = 'è®¡ç®—é”™è¯¯';
                resultEl.classList.add('error');
                breakdownEl.textContent = 'ç»“æœæ— æ•ˆï¼Œè¯·æ£€æŸ¥è¾“å…¥';
                return;
            }
            
            // æ›´æ–°æ˜¾ç¤º
            resultEl.textContent = rca.toLocaleString('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
            
            // é£é™©è´¡çŒ®åˆ†è§£
            const total = Object.values(variance).reduce((a, b) => a + b, 0);
            const breakdown = Object.entries(variance)
                .filter(([k, v]) => v > 0)
                .map(([k, v]) => `${k}: ${Math.round(v/total*100)}%`)
                .join(' | ');
            breakdownEl.textContent = breakdown || '-';
            
            // è¿›åº¦æ¡
            const maxRCA = 50000;
            const progress = Math.min((rca / maxRCA) * 100, 100);
            riskBarEl.style.width = progress + '%';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            calculateDemo();
        });
    </script>
</body>
</html>
