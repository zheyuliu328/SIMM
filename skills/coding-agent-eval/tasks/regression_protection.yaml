id: "regression_protection"
desc: "Ensure new changes don't break existing functionality"
category: "regression"
difficulty: "medium"
env:
  repo_url: "https://github.com/openclaw/eval-template-python.git"
  branch: "main"
  setup_cmd: |
    pip install -r requirements.txt
task_input:
  spec: |
    Make a small change to the codebase (add a new field to User model)
    and ensure all existing tests still pass.
    
    Constraints:
    - Add 'last_login_at' field to User model
    - Update any affected code paths
    - All existing tests must pass without modification
    - New test for the new field optional but encouraged
success_criteria:
  code_based:
    run_tests: ["regression_suite_full"]
    no_new_failures: true
    coverage_threshold: 80
  model_rubric:
    - "Check if change is minimal and focused"
    - "Verify backward compatibility"
  human: true  # Human review for nuanced cases
trials:
  count: 5
  stop_on_success: false
  max_duration: 300
timeout: 600
thresholds:
  pass_at_1: 0.80
  pass_at_5: 0.40