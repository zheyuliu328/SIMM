# 三仓商业化开源工具路线图

**目标**: 72小时内达到"可商业化落地的开源工具"水准

---

## Phase 1（24-36小时）：安全与稳定闭环

### Credit One

| 优先级 | 任务 | 验收标准 | 预估工时 |
|--------|------|----------|----------|
| P0 | 配置schema校验 | `make config-check` 通过 | 2h |
| P0 | 结构化日志+run_id | 输出JSON格式日志 | 2h |
| P0 | 危险操作guardrail | `--confirm` 强制确认 | 2h |
| P0 | 最小e2e测试 | `pytest tests/e2e/` 通过 | 3h |
| P1 | CI安全扫描 | gitleaks + bandit 通过 | 2h |
| P1 | 回滚指南 | ROllBACK.md 文档 | 1h |

### FCT

| 优先级 | 任务 | 验收标准 | 预估工时 |
|--------|------|----------|----------|
| P0 | 配置schema校验 | `config/config.yaml` 可校验 | 2h |
| P0 | 审计日志字段 | who/when/what 完整记录 | 2h |
| P0 | 批量插入错误处理 | 失败显式报错，不静默跳过 | 2h |
| P0 | e2e测试 | 完整对账流程测试 | 3h |
| P1 | 数据完整性校验 | checksum验证 | 2h |
| P1 | 回滚指南 | 数据库版本回滚说明 | 1h |

### NLP

| 优先级 | 任务 | 验收标准 | 预估工时 |
|--------|------|----------|----------|
| P0 | 配置schema校验 | `.env` + `config.yaml` 统一 | 2h |
| P0 | 随机种子锁定 | 全局`random.seed(42)` | 1h |
| P0 | 输出checksum | `.sha256` 文件伴随输出 | 2h |
| P0 | e2e测试 | 完整pipeline测试 | 3h |
| P1 | API幂等性 | `--idempotent` 模式 | 2h |
| P1 | 回滚指南 | 数据版本回滚 | 1h |

---

## Phase 2（36-72小时）：运维与发布治理

### 三仓统一任务

| 优先级 | 任务 | 验收标准 | 预估工时 |
|--------|------|----------|----------|
| P0 | docs/ 完整化 | 3/10/30分钟路径文档 | 4h |
| P0 | Release自动化 | tag推送自动生成changelog | 3h |
| P0 | 开源治理文件 | LICENSE + CONTRIBUTING + SECURITY | 2h |
| P1 | 观测指标 | Prometheus端点或日志导出 | 3h |
| P1 | Roadmap | vNext规划，issue模板 | 2h |
| P2 | 性能基准 | 给出最小硬件建议 | 2h |

---

## 关键里程碑

### 24小时检查点
- [ ] 三仓配置校验通过
- [ ] 三仓危险操作guardrail完成
- [ ] 三仓最小e2e测试通过
- [ ] CI安全扫描全绿

### 48小时检查点
- [ ] 三仓docs/完整
- [ ] 三仓Release自动化
- [ ] 三仓开源治理文件齐全

### 72小时检查点
- [ ] 三仓达到"完成"标准
- [ ] 验收证据齐全
- [ ] 面试准备就绪

---

## 完成标准（必须同时满足）

1. ✅ 新用户干净环境10分钟跑通
2. ✅ 接入真实数据样例30分钟跑通
3. ✅ CI全绿：lint+unit+integration+e2e+build+security
4. ✅ Release：tag生成产物与changelog
5. ✅ 安全：gitleaks通过，敏感信息不入库

---

## 未完成判定（任一触发）

- ❌ 需要手动改代码才能跑
- ❌ 静默失败或错误不可定位
- ❌ 无回滚路径或破坏性默认行为
- ❌ CI缺失关键链路或测试不可复现
- ❌ 文档无法让陌生人独立完成3/10/30分钟路径

---

**制定时间**: 2026-02-08 00:45 GMT+8  
**制定人**: main agent
